<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>io.js - ES6 on io.js</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="description" content="iojs">
  <meta name="keywords" content="iojs, io.js, io js, javascript io, uv, libuv, node-forward, node forward, node, node.js, node.js forward, nodejs, nodejs forward, javascript">
  <link href="https://fonts.googleapis.com/css?family=Lato:400,700" rel="stylesheet">
  <link href="style.css" rel="stylesheet">
</head>

  <body>

  <header>
    <div class="content">
      <a href="/" class="logo">io.js</a>
      <div class="spacer"></div>
      <a href="faq.html">常见问题</a>
      <a href="es6.html">ES6</a>
      <a href="https://iojs.org/api/">API 文档</a>
    </div>
  </header>

  <div class="content">

    <h1>io.js 运行 ES6</h1>

    <div class="description">

      <p>io.js 是基于 <a href="https://code.google.com/p/v8/">V8</a> 引擎的现代版本构建的。通过持续更进最新版的 V8 引擎，我们确保可以及时为开发者带来最新的<a href="http://www.ecma-international.org/publications/standards/Ecma-262.htm">JavaScript ECMA-262 规范</a> 语言特性， 同时也会有性能和稳定性的提升。</p>
      <p>io.js 1.1.0 集成了 V8 4.1.0.14 版本， 其中包含的 ES6 特性远远超出 joyent/node@0.12.x 集成的 3.26.33 版本。</p>
    </div>

    <div class="faq-item">

      <h2 class="faq-title">干掉 --harmony</h2>
      <div class="faq-body">
        <p>在 joyent/node@0.12.x (V8 3.26) 上，<code>--harmony</code>
        运行时参数会一并开启所有 <strong>已完成</strong>， <strong>待完成</strong> 和
        <strong>在修订中</strong> 的 ES6 的一大堆特性 (除了 typeof 的非标准/不确定的特性需要通过 <code>--harmony-typeof</code> 开启之外)。
        这就意味着一些真正鸡肋甚至废弃的特性譬如 <a
        href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy"> proxies </a>都会像<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function*"> generators </a> 那样开放给开发者，它们很偏门甚至缺少相关资料。因此，最好的做法要么通过加特定参数(例如
    <code>--harmony-generators</code>) 开启稳定的特性，要么直接开启全部但严格地使用特定部分特性。</p>
        <p>使用 io.js@1.x (V8 4.1+)，这些烦恼通通没了。
        所有的特性在逻辑上被分为<strong>已完成</strong>，<strong>待完成</strong>和<strong>修订中</strong> 三部分：</p>
        <ul class="task-list">
    <li>所有 <strong>已完成</strong> 的特性，都是在 V8 中确信已经稳定的，例如 <a
      href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function*"> generators </a>，<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/template_strings">模板</a>，<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/New_in_JavaScript/ECMAScript_6_support_in_Mozilla#Additions_to_the_String_object">新增的字符串方法</a>
等等都会在 <strong> io.js</strong> 中默认开启，且<strong>不需要</strong>任何运行时参数。</li>
    <li>再就是 <strong>待完成</strong>
    的特性都是基本完成但是却没有经过充分测试或者更新为最新的标准，因此 V8
    团队认为这些是不稳定的 (可能有些坑没被覆盖到)。相当于在 3.26 <a
    href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function*"> generators </a>的状态。
  我们提供了类似于 "自己承担使用风险" 的功能，需要加入运行时参数： <code>--es_staging</code> (或者， <code>--harmony</code>)。</li>
    <li>最后，所有 <strong>修订中</strong> 的特性可以通过特有的参数开启 (例如
    <code>--harmony_arrow_functions</code>)，当然不建议这么做除非你是用于测试。</li>
    </ul>
  </div>

      <h2 class="faq-title">
       io.js 默认开启了哪些 ES6 特性(不加任何参数)？
      </h2>
      <div class="faq-body">
      <ul class="task-list">
        <li>Block scoping</li>
        <ul class="task-list">
          <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/let">let</a></li>
          <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const">const</a></li>
          <li><code>function</code>-in-blocks</a></li>
        </ul>

        <div class="note">
          As of v8 3.31.74.1, block-scoped declarations are <a href="https://groups.google.com/forum/#!topic/v8-users/3UXNCkAU8Es">intentionally implemented with a non-compliant limitation to strict mode code</a>。Developers should be aware that this will change as v8 continues towards ES6 specification compliance。
        </div>

        <li>Collections</li>
        <ul class="task-list">
          <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map">Map</a></li>
          <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakMap">WeakMap</a></li>
          <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set">Set</a></li>
          <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakSet">WeakSet</a></li>
        </ul>
        <li><a
          href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function*">Generators</a></li>
        <li><a
          href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Lexical_grammar#Numeric_literals">Binary and Octal literals</a></li>
        <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promises</a></li>
        <li><a
          href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/New_in_JavaScript/ECMAScript_6_support_in_Mozilla#Additions_to_the_String_object">New String methods</a></li>
        <li><a
          href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol">Symbols</a></li>
        <li><a
          href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/template_strings">Template strings</a></li>
      </ul>

      <p>在<a href="https://kangax.github.io/compat-table/es6/">兼容列表</a>可以看到更多详细内容和与其他引擎的对比。</p>
    </div>
    </div>

    <div class="faq-item">
      <h2 class="faq-title">
        通过 --es_staging 参数开启的特性有哪些?
      </h2>
      <div class="faq-body">
        <ul class="task-list">
          <li><a href="https://github.com/lukehoban/es6features#classes">类</a> (strict mode only)</li>
          <li><a
            href="https://github.com/lukehoban/es6features#enhanced-object-literals">对象 文字 扩展</a></li>
          <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol"><code>Symbol.toStringTag</code></a> (user-definable results for <code>Object.prototype.toString</code>)</li>
        </ul>
      </div>
    </div>

    <div class="faq-item">

      <h2 class="faq-title">
        我已经用了 --harmony 需要删除吗?
      </h2>
      <div class="faq-body">
        <p>当前 <code>--harmony</code> 参数在 io.js 中的行为是开启
        <strong>待完成</strong> 特性。别忘了，它还有个别名<code>--es_staging</code>。如上面提到的，这些待完成的特性还不稳定。如果想安全地使用，尤其是在生产环境中，最好删除此运行参数，直到特性被默认开启支持。因此，在 io.js 中。如果你保留这个启用，也应该为以后进一步升级 io.js 做好准备，以备 V8 改为更加符合标准的语意。</p>
      </div>
    </div>

    <div class="faq-item">

      <h2 class="faq-title">
        如何找到某一版本的 io.js 所集成的 V8 的版本？
      </h2>
      <div class="faq-body">
        <p>io.js
        提供了简单的方式列出所有依赖关系和各自的版本集成情况(基于
        <code>process</code> 全局对象的特殊二进制文件)。例如要查看 V8 引擎版本，可以在你的终端里面输入以下命令获得：</p>
        <div class="highlight highlight-sh"><pre>iojs -p process.versions.v8</span></pre></div>
      </div>
    </div>
  </div>

  <footer class="content">
    <nav>
      <a href="https://github.com/iojs/io.js/issues">GitHub Issues</a>
      <a href="https://github.com/iojs">GitHub Org</a>
      <a href="https://github.com/iojs/iojs-cn">GitHub 中文组</a>
      <a href="https://webchat.freenode.net/?channels=io.js">IRC Chat</a>
      <a href="http://logs.libuv.org/io.js/latest">发布日志</a>
      <a href="https://github.com/iojs/io.js/blob/v1.x/GOVERNANCE.md#readme">项目管理</a>
    </nav>
  </footer>

</body>

</html>

